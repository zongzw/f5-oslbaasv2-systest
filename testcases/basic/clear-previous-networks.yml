- name: get all previous test-net ids
  shell: |
    source {{ openrc }} && \
    openstack network list | grep test-net | cut -d '|' -f 2
    if [ $? -ne 0 ]; then echo 'test-net does not exist';  fi;
  register: shell_test_net

- name: delete all previous test-net
  shell: |
    source {{ openrc }} && \
    openstack network delete {{ item }}
  with_items: "{{ shell_test_net.stdout_lines }}"
  when: shell_test_net.stdout != 'test-net does not exist'

- name: clear previous project Dev
  shell: |
    source {{ openrc }} && \
    openstack project delete Dev
    if [ $? -ne 0 ]; then echo 'project Dev does not exist';  fi;
  
- name: clear previous user Dev
  shell: |
    source {{ openrc }} && \
    openstack user delete Dev 
    if [ $? -ne 0 ]; then echo 'user Dev does not exist';  fi;